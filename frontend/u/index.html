<!DOCTYPE html>
<html lang="ru" data-theme="soft">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title id="pageTitle">Профиль</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --font: 'Montserrat', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      --bg:#f4f6fb;
      --panel:rgba(255,255,255,.62);
      --text:#10131a;
      --muted:rgba(16,19,26,.56);
      --line:rgba(16,19,26,.14);
      --shadow:0 18px 60px rgba(18,24,40,.12);
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:var(--font);color:var(--text);background:var(--bg);padding:20px}
    .card{background:var(--panel);border-radius:22px;border:1px solid var(--line);box-shadow:var(--shadow);max-width:900px;margin:0 auto;padding:30px}
    .nm{margin:0;font-size:28px;font-weight:800;letter-spacing:-.02em}
    .rl{margin:6px 0 0;color:var(--muted);font-size:12px;font-weight:800;text-transform:uppercase}
    .about{margin:20px 0;line-height:1.6}
    .avatar{width:120px;height:120px;border-radius:50%;margin-bottom:20px;object-fit:cover}
    .chipA{display:inline-flex;align-items:center;gap:8px;padding:10px 12px;border-radius:999px;border:1px solid var(--line);text-decoration:none;color:var(--text);font-weight:800;font-size:12px;margin:5px 5px 5px 0}
    .chipA:hover{background:rgba(0,0,0,.05)}
  </style>
</head>
<body>
  <div id="app"></div>

  <script>
    // Получаем slug из URL
    const slug = window.location.pathname.split('/').filter(Boolean).pop();
    
    // Ищем профиль в localStorage
    const profileData = JSON.parse(localStorage.getItem('abqd_profile_' + slug) || '{}');
    
    if (!profileData.fullName) {
      document.getElementById('app').innerHTML = '<div class="card"><h1>Профиль не найден</h1><p>Убедитесь, что вы используете правильный адрес.</p></div>';
    } else {
      // Выводим профиль
      let html = '<div class="card">';
      
      if (profileData.avatarDataUrl) {
        html += '<img src="' + profileData.avatarDataUrl + '" class="avatar" alt="avatar">';
      }
      
      html += '<h1 class="nm">' + (profileData.fullName || '') + '</h1>';
      
      if (profileData.role) {
        html += '<div class="rl">' + profileData.role + '</div>';
      }
      
      if (profileData.about) {
        html += '<div class="about">' + profileData.about.replace(/\n/g, '<br>') + '</div>';
      }
      
      if (profileData.chips && profileData.chips.length) {
        html += '<div style="margin:20px 0">';
        for (let chip of profileData.chips) {
          if (chip.label && chip.url) {
            html += '<a href="' + chip.url + '" class="chipA" target="_blank">' + chip.label + '</a>';
          }
        }
        html += '</div>';
      }
      
      html += '</div>';
      
      document.getElementById('app').innerHTML = html;
      document.title = profileData.fullName;
    }
  </script>
</body>
</html>
